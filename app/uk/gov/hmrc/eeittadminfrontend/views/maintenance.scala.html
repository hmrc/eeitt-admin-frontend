@*
 * Copyright 2017 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import helper._
@import play.api.i18n.Messages.Implicits._
@import play.api.Play.current

@(clientID: String)(implicit request : Request[_], appConfig: uk.gov.hmrc.eeittadminfrontend.AppConfig)

@uk.gov.hmrc.eeittadminfrontend.views.html.main_template(title = "EEITT-Admin Login Page"){
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<meta name="google-signin-client_id" content=@clientID >

<title>Maintenance Scripts</title>
<div class="text-center">
    <h2>Maintenance Scripts</h2>
    <br>
    <div class="col-md-4 col-md-offset-2">
        <h3>Google Spreadsheet</h3>
        <button class="glyphicon glyphicon-play btn" action="#" onclick="getAccessToken();"></button>
    </div>
    <div class="col-md-4">
        <h3>Process Delta</h3>
        <button class="glyphicon glyphicon-upload btn" action=""></button>
    </div>
</div>
<script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>

<script async defer src="https://apis.google.com/js/api.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script>

    function onLoad() {
      gapi.load('auth2', function() {
        gapi.auth2.init();
      });
    }

    function morePermissions() {
    var options = new gapi.auth2.SigninOptionsBuilder(
        {'scope' : 'https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive'});

        googleUser = gapi.auth2.getAuthInstance().currentUser.get();
        googleUser.grant(options).then(
        function(success){
        console.log("success");
        },
        function(fail){
        alert("failed");
        }
        );
    }

    function getAccessToken() {
    morePermissions()
    var accessToken = gapi.auth2.getAuthInstance().currentUser.get();
    var bob = accessToken.getAuthResponse(true).access_token;
    console.log(bob);
    }
</script>
}